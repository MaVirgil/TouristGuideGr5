<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div th:fragment="basicForm(attraction, pageRef)" th:object="${attraction}" class="form-wrapper">
        <form action="#" th:action="${pageRef} == 'newAttraction' ? @{/attractions/save} : @{/attractions/update}" method="post">
            <!-- Headers -->
            <h2 th:if="${pageRef == 'newAttraction'}">Register an attraction</h2>
            <h2 th:if="${pageRef == 'updateAttraction'}">Update an attraction</h2>

            <!-- Inputs -->
            <div>
                <div th:if="${pageRef == 'updateAttraction'}">
                    <input type="hidden" th:field="*{id}">
                </div>
                <div th:if="${pageRef == 'newAttraction'}">
                    <label for="nameSave" class="form-label">Name</label>
                    <input type="text" id="nameSave" th:field="*{name}" placeholder="write name" required maxlength="25">
                </div>
                <div th:if="${pageRef == 'updateAttraction'}">
                    <label for="nameUpdate" class="form-label">Name</label>
                    <input type="text" id="nameUpdate" th:field="*{name}" readonly>
                </div>
                <div>
                    <label for="description" class="form-label">Description</label>
                    <textarea id="description" th:field="*{description}" placeholder="write description" required></textarea>
                </div>
                <label for="city" class="form-label">Select a city</label>
                <select id="city" th:field="*{city}">
                    <option th:each="cityName : ${cities}" th:value="${cityName}" th:text="${cityName}"/>
                </select>
                <fieldset>
                    <legend>Choose applicable tags</legend>
                    <div th:each="tag : ${tags}" id="tag-checkbox">
                        <label th:for="${tag.name}" th:text="${tag.name}"></label>
                        <input type="checkbox" th:id="${tag.name}" th:field="*{selectedTags}" th:value="${tag}" th:attrappend="checked=${attraction.getSelectedTags.contains(tag.name)}">
                    </div>
                </fieldset>
            </div>
            <!-- Submit -->
            <button type="submit">Submit</button>
        </form>
        <!-- Go Back -->
        <a href="/attractions">
            <button>Go back</button>
        </a>
    </div>

    <!-- Go back Fragment-->
    <a th:fragment="formGoBack" href="/attractions">
        <button>Go back</button>
    </a>
</body>
</html>